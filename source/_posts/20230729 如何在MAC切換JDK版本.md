---
title: 如何在MAC切換JDK版本
date: 2023-07-29 16:11:55
tags: [JAVA]
---
## 終端機查看當前版本
我目前使用的是JAVA17
```
java -version

顯示：
java version "17.0.6" 2023-01-17 LTS
```

查看所有安裝的JAVA版本
```
/usr/libexec/java_home -V

顯示：
Matching Java Virtual Machines (3):
    17.0.6 (arm64) "Oracle Corporation" - "Java SE 17.0.6" /Library/Java/JavaVirtualMachines/jdk-17.jdk/Contents/Home
    1.7.80.15 (x86_64) "Oracle Corporation" - "Java" /Library/Internet Plug-Ins/JavaAppletPlugin.plugin/Contents/Home
    1.7.0_80 (x86_64) "Oracle Corporation" - "Java SE 7" /Library/Java/JavaVirtualMachines/jdk1.7.0_80.jdk/Contents/Home
/Library/Java/JavaVirtualMachines/jdk-17.jdk/Contents/Home
```

## JDK的安裝路徑資料夾
/Library/Java/JavaVirtualMachines
Library在中文作業系統可能叫資源庫，我找好久才找到，用ＭＡＣ可以用打開FINDER點```前往/前往檔案夾```直接複製路徑貼上，這樣就找得到資料夾囉
![](https://hackmd.io/_uploads/HJgaVQfo3.png)
等等我們所需要的jdk資料夾都在這邊，依照需要的jdk版本點進去，找到```Contents/Home```的資料夾，複製Home的路徑

備註 ：複製路徑的方法就是對著資料夾右鍵（control＋按面板）點```拷貝```

## 切換JDK版本
### 1. 編輯bash_profile
打開終端機輸入指令，用vim打開bash_profile檔案
```
vim ~/.bash_profile
```

### 2.編輯檔案
a. 進入之後看到編輯畫面（我這邊沒有網路其他文章那的一堆字的畫面），按下```i```進入編輯模式，成功進入會看見下方變成INSERT ：
![](https://hackmd.io/_uploads/HkaZIVGi2.png)

b. 設定JAVA_HOME變數
```
export JAVA_HOME=/Library/Java/JavaVirtualMachines/(版本號.jdk)/Contents/Home

例如：
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-17.jdk/Contents/Home
```
網路上查到一個方式，可以把另一個版本的資料夾名稱弄成另一個變數，這樣切換版本就很方便，也不用怕打錯路徑
```
export JAVA_7=jdk1.7.0_80.jdk
export JAVA_17=jdk-17.jdk
export JAVA_HOME=/Library/Java/JavaVirtualMachines/$JAVA_17/Contents/Home
```
以上面這種寫法來說，我只要把JAVA_HOME變數```$JAVA_17```改
成```$JAVA_7```就能成功切換成JAVA7的版本

備註：
* JDK還是要自己下載，這不是自動的！！
* JAVA版本的變數一定要在JAVA_HOME前，否則JAVA_HOME會抓不到（檔案讀取是由上而下）

更改完要按```esc```再輸入```:wq```儲存再離開

## 3. 啟用設定
```
$ source ~/.bash_profile
```
這個指令是讓文件立刻生效，不輸入的話要重開才有用（不重開的話，會鬼打牆怎麼設定都不對）

## 4. 檢查設定
```
echo $JAVA_HOME
```
這個指令會顯示剛才我們設定的路徑，記得一定要加＄字號才是環境變數喔～

## 5. 成果
![](https://hackmd.io/_uploads/BJ8a3VGjh.png)


## 為什麼我重開終端機之後版本又變回來了？
注意一下終端機執行的位置，我一開始用的那個是在zsh的shell，而我們剛才設定的是在bash，在zsh打開之後沒有執行source指令的話，就不會沿用剛才我們的bash＿profile設定。

解決方法就是可以把寫在bash_profile的部分寫在zshenv檔案裡，開啟方法：
```
vim .zshenv
```
其他步驟都一樣，立即生效設定的指令改為
```
source .zshenv
```

## 參考資料
[Java For Mac 安裝Java與設定環境變數path](https://iyoumealice20.pixnet.net/blog/post/327171772)
[Mac OS X 設定 .bash_profile (Java & Maven)](https://hackmd.io/@spark9092/HyR_57oGY)
[iTerm 2、Bash 和 Zsh 之间的区别是什么？](https://www.zhihu.com/tardis/sogou/ans/2345481001)