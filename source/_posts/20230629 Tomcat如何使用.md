---
title: Tomcat如何使用
date: 2023-06-29 22:28:56
tags:
---
迷茫的JAVA之路，跟之前學的rails不一樣啊~(懷念一下專案裡面直接rails s，就能打開的localhost)JavaWeb專案的預覽server還要另外裝，而我們公司前輩跟我說是使用tomcat，上網查過之後得知tomcat是在JavaWeb開發中蠻常見的伺服器工具，那它要怎麼用呢?

## 安裝Tomcat
1. [這裡](https://tomcat.apache.org/whichversion.html)可以查看適合的版本，找到適合版本可以在左側欄找到相對應版本的下載點，如下圖：
![](https://hackmd.io/_uploads/S1tvvIKdh.png)

2. 記得選對作業系統的版本
![](https://hackmd.io/_uploads/rJxWd8Yuh.png)

3. 下載後可在任何地方解壓縮即可使用(不要解到自己找不到的地方就行了)，下圖為解壓縮完的樣子(下面那個檔案是下載下來的壓縮檔)，我自己創建了一個tomcat資料夾專門存放tomcat各個版本:
![](https://hackmd.io/_uploads/HJIG9UKu2.png)

## 資料夾結構
* bin：可以在tomcat上運行的程序
* conf：tomcat的配置文件，像是運行用的port設定之類的
* lib：tomcat運行要用的jar包
* logs：伺服器運行紀錄，啟動之後會產生的伺服器訊息通通都會存在這裡
* temp：運行時所產生的暫存檔
* webapp：存放執行專案，如果要將專案佈署到web上就是要塞進這資料夾
    這裡的docs資料夾裡面就是tomcat的技術文件，和網站上看到的一樣；ROOT資料夾則是預設畫面，例如等等要確認開啟是否成功的那個歡迎畫面，就是這個資料夾裡的index.jsp檔案
* work：存放JSP轉成Servlet的編譯檔案

## 啟動Tomcat伺服器
有兩種方法可以開啟tomcat伺服器，挑一種開就行了，我自己是方法一打得開，但輸入網址一直有問題，換了方法二就可以進入成功畫面。

### 方法一、使用startup.bat
a. 找到tomcat的bin資料夾，有一個檔案叫做```startup.bat```，點擊兩下即可啟動伺服器 
    
b. 在網址列輸入```http://localhost:8080``` 或是 ```http://127.0.0.1:8080```檢查是否成功開啟，下圖為成功啟動之畫面
![](https://hackmd.io/_uploads/SyfgJwcO2.png)

* 如果視窗點兩下就閃退，可以去檢查JAVA_HOME設定是否正確(名稱是否全大寫、_有沒有打錯、路徑是否到JDK的目錄)

* 遇到閃退情形也有可能是Tomcat與當前使用的JAVA版本不相容，原本下載10(支援JAVA 8以後，使用同樣支援JAVA8以後的Tomcat 9也是閃退)，發現系統JAVA是1.7，下載Tomcat 8就可以順利開啟。 

---
#### 啟動後顯示亂碼怎麼辦呢?
![](https://hackmd.io/_uploads/SJBMgPq_3.png)
雖然似乎不影響使用，但看起來不太舒服，該怎麼讓它正常顯示呢?

a. 到Windows的設定，找到時間和語言/相關設定/系統管理語言設定
![](https://hackmd.io/_uploads/SkSVbPq_h.png)

b. 變更系統地區設定
![](https://hackmd.io/_uploads/rkvD-v9d3.png)

c. 將下方 ```Beta:使用Unicode UTF-8提供全球語言支援```選項打勾，確定
![](https://hackmd.io/_uploads/HysYWD5Oh.png)

d. 可以正常顯示中文了~
![](https://hackmd.io/_uploads/BJZezw9u3.png)

---

### 方法二、 使用終端機指令
a. 用```Win+R```，輸入```cmd```

b. 輸入指令到tomcat的bin資料夾，例如:```cd C:\Program Files\tomcat\apache-tomcat-8.5.90\bin```

c. 輸入指令```catalina run```開啟伺服器，這個方法的好處就是如果JAVA_HOME設置上有問題，可以直接在終端機上顯示錯誤訊息，一看就知道哪裡有問題~

d. 在網址列輸入```http://localhost:8080``` 或是 ```http://127.0.0.1:8080```檢查是否成功開啟，成功結果如方法一

## 關閉Tomcat伺服器的方式
三種方法可以選一種用：
1. 把視窗直接關掉
2. 在執行的視窗(startup.bat或終端機畫面)按下ctrl+c
3. bin資料夾裡的shutdown.bat點兩下，剛才用startup方式打開的視窗就會關掉了

## 修改Tomcat使用的port
1. 進到tomcat的conf資料夾，修改server.xml檔案，可用記事本或是其他編輯器修改
2. 打開後找到connector標籤，會看到預設port是8080，可以修改成其他的port(1~65535之間的數字，盡量1000以上，避免撞系統使用到的port)，改完存檔
    ```
    <Connector port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443"
               maxParameterCount="1000"
               />
    ```
3. 重新開啟tomcat伺服器，這樣就修改完成了
![](https://hackmd.io/_uploads/B1vKLPcO3.png)

## 在Eclipse上使用
### 1. 新增伺服器
a. 視窗(Window) / 喜好設定(Preferences) / 伺服器（Server） / Runtime Environments / 新增(add)/找到我們要用的Tomcat版本 / 下一步
![](https://hackmd.io/_uploads/rkxqfAwK2.png)

b. 瀏覽/選擇tomcat所在資料夾，要在```apache-tomcat-（版本號）```這個資料夾的目錄 /完成
![](https://hackmd.io/_uploads/rkF8bAvY3.png)

### 2. 執行
a. 找到上方工具列的視窗(Window) / Web 瀏覽器能設定我們開啟server的時候要用哪個瀏覽器
![](https://hackmd.io/_uploads/rkVWXADYh.png)

b. 進到想預覽的頁面檔案，按工具列的綠色執行按鈕，選擇剛才添加的伺服器/完成
![](https://hackmd.io/_uploads/Hk7-rAPY2.png)

c.成功啟動～
![](https://hackmd.io/_uploads/B12VHCwK2.png)

d.關閉伺服器
下方視窗的主控台分頁有個紅色的停止鍵，按下去就能關閉
![](https://hackmd.io/_uploads/HyVFBRDKh.png)


## 參考資料
[【尚硅谷】JavaWeb 2020IDEA新版](https://www.youtube.com/playlist?list=PLmOn9nNkQxJGJVS8ZqBcbjkxPh0OuaW2E)